(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b20bdb0"],{"2ea3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap"}},[e("left-pay"),t.isLogin?e("right-table"):t._e()],1)},i=[],n=function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"pay-card phone-card margin-15",staticStyle:{flex:"1 1 400px"},attrs:{id:"imputation-pay"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" 智能归集下单 ")]},proxy:!0}])},[e("el-alert",{ref:"alertInfo",attrs:{title:"智能归集简介",type:"success",description:t.info,"show-icon":"",closable:!1,setIcon:"el-icon-info"}}),e("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"场景选择"}},[e("el-radio-group",{staticStyle:{display:"flex",width:"100%"},attrs:{size:"medium"},model:{value:t.form.scene,callback:function(e){t.$set(t.form,"scene",e)},expression:"form.scene"}},[e("el-radio",{staticStyle:{flex:"1"},attrs:{label:0,border:""}},[t._v(" 自动（激活 + 能量） ")]),e("el-radio",{staticStyle:{flex:"1"},attrs:{label:1,border:""}},[t._v(" 代理能量 ")])],1),e("div",{staticStyle:{"line-height":"25px"}},[e("b",[t._v("tips:")]),t._v("自动场景中如地址已激活则只收代理能量费用")])],1),e("el-form-item",{attrs:{label:"设定满足归集条件的USDT数量"}},[e("el-input",{attrs:{clearable:"",placeholder:"设定符合归集条件的USDT数量",type:"text"},model:{value:t.form.usdt,callback:function(e){t.$set(t.form,"usdt",e)},expression:"form.usdt"}})],1),e("el-popover",{ref:"popover",attrs:{placement:"top",title:"",width:"300",trigger:"focus"}},[e("div",[t._v("如你提供的api接口：https://www.api.com/callback")]),e("div",[t._v("当符合归集条件的地址，我们将请求你填写的API接口，并且附带一个地址一个订单ID两个参数。如下")]),e("div",[t._v("https://www.api.com/callback?receiveAddress=TQE267x5xy94T4UnTwaEZbNm3t1FbTsqHZ&orderId=1700926033703909")])]),e("el-form-item",{attrs:{label:"符合归集条件通知回调接口"}},[e("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{clearable:"",placeholder:"符合归集条件通知回调接口"},model:{value:t.form.callbackUrl,callback:function(e){t.$set(t.form,"callbackUrl",e)},expression:"form.callbackUrl"}})],1),e("el-form-item",{attrs:{label:"批量添加归集地址"}},[e("el-input",{staticClass:"dengkuan",attrs:{type:"textarea",autosize:{minRows:8},placeholder:t.batchReceiveAddressPlaceholder},model:{value:t.batchReceiveAddress,callback:function(e){t.batchReceiveAddress=e},expression:"batchReceiveAddress"}})],1),e("el-form-item",{attrs:{label:"详细"}},[e("div",{staticStyle:{"line-height":"25px"}},[e("label",{staticClass:"left"},[t._v("地址数量：")]),e("span",{staticClass:"warning-color"},[t._v(t._s(t.addressNums)+" 个")])]),e("div",{staticStyle:{"line-height":"25px"}},[e("label",[t._v("归集单价：")]),e("span",{staticClass:"warning-color"},[t._v(t._s(t.toTrx(this.orderPrice))+" TRX")])]),e("div",{staticStyle:{"line-height":"25px"}},[e("label",{staticClass:"left"},[t._v("预计消费：")]),e("span",{staticClass:"warning-color"},[t._v(t._s(t.toTrx(t.orderMoney))+" TRX")])]),t.isLogin?e("div",{staticStyle:{"line-height":"25px"}},[e("label",[t._v("账号余额：")]),e("span",{staticClass:"warning-color"},[t._v(t._s(t.toTrx(t.userInfo.balance))),e("span",{staticStyle:{"font-size":"12px","margin-left":"5px"}},[t._v("TRX")]),t._v("，请保持余额充足否则归集将失败")])]):t._e()]),e("el-form-item",[t.canPay?e("el-button",{staticClass:"button-style",attrs:{round:"",size:"medium",type:"primary",disabled:t.submitLoading},on:{click:t.submitForm}},[t._v("提交")]):e("el-alert",{attrs:{title:"归集暂停下单",type:"warning","show-icon":"",closable:!1}})],1)],1)],1)},r=[],o=a("b775");const l=async function(t){const e=await Object(o["i"])({method:"post",url:"/imputation/config",data:t});if(e.data&&e.data.code===o["g"])return e.data.data},c=async function(t){const e=await Object(o["i"])({method:"post",url:"/imputation/add",data:t});return e.data&&e.data.code===o["j"]},d=async function(t){const e=await Object(o["i"])({method:"post",url:"/imputation/data",data:t,headers:{[o["d"]]:["#imputation-table",o["b"]],[o["h"]]:1}});return e.data&&e.data.data};var u=a("cf45"),p=a("2cdd"),f=a("55e6"),h={name:"leftPay",components:{},mixins:[p["a"],f["a"]],data:function(){return{toTrx:u["q"],info:"智能监控地址USDT余额到指定值需要归集到热钱包时，如地址没激活则需要TRX激活，后续需要USDT转帐提供能量，智能归集一键解决此场景，调用后您可直接转走资金，无需任何额外操作",batchReceiveAddressPlaceholder:"请输入批量提交的地址\n一行一个地址, 如下: \nTQE267x5xy94T4UnTwaEZbNm3t1FbTsqHZ\nTQE267x5xy94T4UnTwaEZbNm3t1FbTsqHZ\nTQE267x5xy94T4UnTwaEZbNm3t1FbTsqHZ\n......",batchReceiveAddress:"",form:{scene:0,usdt:"",callbackUrl:"",batchReceiveAddress:""},priceConfig:{0:4e6,1:3e6},submitLoading:!1,submitLoadingConfig:{headers:{[o["d"]]:["#imputation-pay"]}},canPay:!1}},computed:{batchAddressData:function(){if(this.batchReceiveAddress){const t=this.batchReceiveAddress.split("\n");return t.filter(t=>t.length>0)}return[]},addressNums:function(){return this.batchAddressData.length},orderPrice:function(){return this.priceConfig[this.form.scene]},orderMoney:function(){return this.priceConfig[this.form.scene]*this.addressNums}},watch:{submitLoading:function(){this.submitLoading?o["a"].start(this.submitLoadingConfig):o["a"].close(this.submitLoadingConfig)}},async created(){this.submitLoading=!0;try{await this.getPriceConfig(),this.submitLoading=!1}catch(t){this.submitLoading=!1}},methods:{getPriceConfig:async function(){const t=await l({});t&&(this.priceConfig=t.priceConfig,this.canPay=t.canPay)},submitForm:async function(){if(this.isLogin){if(this.formValidate()){const e=Object.assign({},this.form);e.batchReceiveAddress=this.batchAddressData,e.usdt=1e6*Number(e.usdt);try{this.submitLoading=!0,await c(e),this.submitLoading=!1}catch(t){this.submitLoading=!1}}}else await this.notLoginTips()},formValidate:function(){try{if(!this.form.usdt)throw"USDT数量不能为空";if(!this.form.callbackUrl)throw"通知接口不能为空";if(0===this.addressNums)throw"批量地址不能为空";return!0}catch(t){return this.$message.warning(t),!1}}}},m=h,b=(a("fd98"),a("2877")),g=Object(b["a"])(m,n,r,!1,null,"29117e0c",null),y=g.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"2 2 800px",display:"flex"}},[e("el-card",{staticClass:"pay-card phone-card margin-15",staticStyle:{flex:"1"},style:{},attrs:{id:"imputation-table","body-style":t.card_body_style}},[e("h3",[t._v("搜索")]),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",gap:"20px","flex-wrap":"wrap","margin-bottom":"15px"}},[e("el-radio-group",{staticStyle:{flex:"1 1 400px",display:"flex"},model:{value:t.search.state,callback:function(e){t.$set(t.search,"state",e)},expression:"search.state"}},[e("el-radio",{staticStyle:{flex:"1"},attrs:{label:1,border:""}},[t._v("监控中")]),e("el-radio",{staticStyle:{flex:"1"},attrs:{label:2,border:""}},[t._v("完成")]),e("el-radio",{staticStyle:{flex:"1"},attrs:{label:3,border:""}},[t._v("异常")])],1),e("el-input",{staticStyle:{flex:"1 1 400px"},attrs:{clearable:"",placeholder:"请填写接收地址"},model:{value:t.search.receiveAddress,callback:function(e){t.$set(t.search,"receiveAddress",e)},expression:"search.receiveAddress"}}),e("el-button",{staticStyle:{flex:"1 1 400px"},attrs:{round:"",size:"medium",type:"warning"},on:{click:t.resetSearch}},[t._v("重置")])],1),e("custom-table",{attrs:{"badge-key":t.badgeKey,"is-phone":t.isPhone,"table-data":t.tableData,"table-config":t.tableConfig,"show-page":t.showPage,"page-change":t.pageChange,"phone-item-style":t.phoneItemStyle,"phone-item-card-body":t.phoneItemCardBody,pages:t.pages,page:t.page},scopedSlots:t._u([{key:"state",fn:function({vSlot:a}){return[e("div",[e("el-tag",{staticClass:"font-wight-600",attrs:{effect:"dark",size:t.tagSize,type:t.getStateKey(a)}},[t._v(" "+t._s(t.getStateValue(a))+" ")])],1)]}},{key:"sceneType",fn:function({vSlot:a}){return[e("el-tag",{staticClass:"font-wight-600",attrs:{size:t.tagSize,type:"primary"}},[t._v(" "+t._s(0===a.sceneType?"自动":"代理能量")+" ")])]}},{key:"receiveAddress",fn:function({vSlot:a}){return[e("div",{staticClass:"primary-color",staticStyle:{"font-weight":"600"}},[e("i",{staticClass:"el-icon-document-copy",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.copyContent(a.receiveAddress)}}}),e("span",{staticStyle:{"margin-left":"7px"}},[t._v(t._s(t.showReceiveAddress(a.receiveAddress)))])])]}},{key:"controlUsdt",fn:function({vSlot:a}){return[e("el-tag",{staticClass:"font-wight-600",attrs:{size:t.tagSize,type:"warning"}},[t._v(" "+t._s(a.controlUsdt)+" USDT ")])]}},{key:"hasUsdt",fn:function({vSlot:a}){return[e("el-tag",{staticClass:"font-wight-600",attrs:{size:t.tagSize,type:"warning"}},[t._v(" "+t._s(a.hasUsdt)+" USDT ")])]}},{key:"orderMoney",fn:function({vSlot:a}){return[e("el-tag",{staticClass:"font-wight-600",attrs:{size:t.tagSize,type:"warning"}},[t._v(" "+t._s(a.orderMoney)+" ")])]}},{key:"callbackUrl",fn:function({vSlot:e}){return[t._v(" "+t._s(e.callbackUrl)+" ")]}},{key:"info",fn:function({vSlot:e}){return[t._v(" "+t._s(e.info)+" ")]}},{key:"createTime",fn:function({vSlot:e}){return[t._v(" "+t._s(e.createTime)+" ")]}},{key:"other",fn:function({vSlot:a}){return[e("el-button",{staticClass:"el-button-custom margin-0 width-100",style:{"margin-top":t.isPhone?"10px !important":"auto"},attrs:{round:"",plain:"",size:"mini"},on:{click:function(e){return t.copyContent(a.orderId)}}},[t._v("复制订单ID")])]}}])})],1)],1)},w=[],x=a("9215"),_=a("878f"),S={name:"rightTable",components:{CustomTable:_["a"]},mixins:[x["a"],p["a"]],data:function(){return{badgeKey:"",showPage:!0,page:1,pages:1,pageRequest:!1,tableData:[],tableConfig:[{name:"state",label:"状态"},{name:"sceneType",label:"场景"},{name:"receiveAddress",label:"接收地址",width:"170px"},{name:"controlUsdt",label:"归集条件"},{name:"hasUsdt",label:"USDT余额"},{name:"orderMoney",label:"消费"},{name:"callbackUrl",label:"通知API"},{name:"createTime",label:"创建时间",width:"100px"},{name:"info",label:"信息"},{name:"other",label:"操作"}],search:{state:"",receiveAddress:""}}},created(){this.createIntervalTask(this.getData,this.$parent.$options.name)},methods:{pageChange:async function(t){await this.getData(t,!0)},getData:async function(t,e){if(this.isLogin&&(e||!this.pageRequest)){this.pageRequest=!!e,t=t||this.page;try{const{data:e,pages:a}=await d({page:t,search:this.search});this.tableData=e,this.pages=a,this.page=t,this.pageRequest=!1}catch(a){}}},getStateKey:function(t){return 0===t.freeze?"primary":1===t.isDelegate?"success":"danger"},getStateValue:function(t){const e=this.getStateKey(t);return"primary"===e?"监控中":"success"===e?"完成":"danger"===e?"异常":void 0},resetSearch:function(){this.search.state="",this.search.receiveAddress=""}}},T=S,k=Object(b["a"])(T,v,w,!1,null,"4d7f71f6",null),C=k.exports,A={name:"imputation",components:{leftPay:y,rightTable:C},mixins:[p["a"]],data:function(){return{}},created(){this.setAppMainLoading(!1)}},U=A,D=Object(b["a"])(U,s,i,!1,null,"50a29b20",null);e["default"]=D.exports},"55e6":function(t,e,a){"use strict";e["a"]={methods:{notLoginTips:async function(){return await this.$alert("primary","登录？","请先登录，再操作","确定")}}}},8230:function(t,e,a){},fd98:function(t,e,a){"use strict";a("8230")}}]);